---
title: |
       | 10 Random Forest
author: "Fabian Blasch"
date: "`r format(Sys.Date(), format = '%m/%d/%Y')`"
header-includes:
   - \usepackage{amsmath}
   - \usepackage{amssymb}
   - \usepackage{float}
   - \usepackage{titling}
   - \usepackage{xcolor}
output: 
   pdf_document:
      number_sections: TRUE
---

# Load Data

```{r, results = "hide", message = FALSE, warning = FALSE}
# source AUX
source("./../Misc/Auxilliary.R")
source("./../Misc/model_eval.R")

# packages
get.package(c("lubridate", "glmnet", "glmnetUtils", "tidyverse",
              "ranger", "caret", "beepr"))

# load data
dat_bids <- readRDS("./../../Data/Bid Tab RDS/Bids_df_split.RDS")
dat_bids_id <- readRDS("./../../Data/Bid Tab RDS/Bids_id_df_split.RDS")
dat_aucs <- readRDS("./../../Data/Bid Tab RDS/Aucs_df_split.RDS")
```

# Data

```{r}
# exclude variables that are not supposed to be in the model
lapply(dat_aucs, \(x){

  # remove
  within(x, {
    Contract_ID <- NULL
    MLOT <- NULL
    EW_Diff <- NULL
    Winning_Bid <- Winning_Bid / 1e3
    Eng_Est <- Eng_Est / 1e3
  }) -> tmp

  # return
  return(tmp)
  
}) -> dat_aucs_mod
```

# Variable Selection

The data set contains a lot of binary variables that are highly correlated. Accordingly, to allow for a good prediction we need to perform variable selection before using the data. Thus, 

```{r}
# nested VarSel C
?ranger::ranger()

```

